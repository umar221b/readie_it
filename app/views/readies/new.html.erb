<div class="row not-selectable no-cursor">
	<div class="col-md-12 col-sm-12">
		<div class="question-box">
			<h2 class="title">Generate a Readie</h2>
			<div class="progress-bar-div separator-div" style="border-top: 2px solid #f3f3f3;">
				<div class="progress">
					<div id="progress_bar" class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="10"
					aria-valuemin="0" aria-valuemax="100" style="width:25%">
					25%
				</div>
			</div>
		</div>
			<div class="question-area">
				<div class="learn">

					<div class="separator-div row margin-up padding-down">
					<div class="col-md-12 col-sm-12 center">
							<h3>What is a Readie?</h3>
							<p>
                A Readie is a slick trick you can use to know whether somebody opened the email you sent them or not.
              </p>
						</div>
					</div>
				</div>
				<div class="center" style="margin-top: 8px;">
						<button onclick="loadSecondDiv()" id="cont" class="btn btn-primary btn-lg" style="font-size: 16px;">Next</button>
					</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal -->
<div id="confirmModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Confirmation</h4>
      </div>
      <div class="modal-body">
        <p>Please confirm creating your Readie.</p>
      </div>
      <div class="modal-footer">
        <button onclick="createReadie()" type="button" class="btn btn-success" data-dismiss="modal">Confirm</button>
      </div>
    </div>

  </div>
</div>
<script>

function loadSecondDiv() {
  $("#cont").remove();
  $("#progress_bar").html("50%");
  $("#progress_bar").css("width", "50%");
  $(".learn").append("<div id='second_div' class='row margin-up padding-down separator-div'><div class='col-md-12 col-sm-12 center'><h3>How to use it?</h3><p>Upon generating a Readie, you will see 2 boxes with some sort of code inside each of them. One is used to add the Readie to your email, and the other is used to check the status of your Readie.</p></div></div>");
  $("#second_div").hide().show("slow");
  $(".learn").after('<div class="center" style="margin-top: 8px;"><button data-toggle="modal" data-target="#confirmModal" id="cont" class="btn btn-primary btn-lg" style="font-size: 16px;">Generate</button></div>');
  scroll("#second_div");
}

function createReadie() {
  $.post("/readies.json/")
    .done(function(data){
      loadThirdDiv(data);
      loadTooltips();
    });
}

function loadTooltips() {
  $('[data-toggle="tooltip"]').tooltip();
  $('pre.copiable').click(function() {
    copy(this.children[0]);
  });
}

function loadThirdDiv(readie) {
  $("#cont").remove();
  $("#progress_bar").html("75%");
  $("#progress_bar").css("width", "75%");
  $(".learn").append('<div id="third_div" class="row margin-up padding-down separator-div"> <div class="col-md-6 col-sm-6 center"> <h3>Use This</h3> <pre class="copiable" data-toggle="tooltip" title="Click to Copy!" data-placement="bottom"> <code> &lt;img src="/readies/readme.json?token=' + readie.token + '" width="0" height="0"/> </code> </pre> </div> <div class="col-md-6 col-sm-6 center"> <h3>Store This</h3> <pre class="copiable" data-toggle="tooltip" title="Click to Copy!" data-placement="bottom"> <code>' + readie.token + ' </code> </pre> </div> </div>');
  $("#third_div").hide().show("slow");
  $(".learn").after('<div class="center" style="margin-top: 8px;"><button onclick="loadFourthDiv()" id="cont" class="btn btn-primary btn-lg" style="font-size: 16px;">Next</button></div>');
  scroll("#third_div");
}

function loadFourthDiv() {
  $("#cont").remove();
  $("#progress_bar").html("100%");
  $("#progress_bar").css("width", "100%");
  $(".learn").append("<div id='fourth_div' class='row margin-up padding-down separator-div'><div class='col-md-12 col-sm-12 center'><h3>How to use it?</h3><p>Upon generating a Readie, you will see 2 boxes with some sort of code inside each of them. One is used to add the Readie to your email, and the other is used to check the status of your Readie.</p></div></div>");
  $("#fourth_div").hide().show("slow");
  $(".learn").after('<div class="center" style="margin-top: 8px;"><button data-toggle="modal" data-target="#confirmModal" id="cont" class="btn btn-primary btn-lg" style="font-size: 16px;">Generate</button></div>');
  scroll("#fourth_div");
}

function scroll(id) {
  var tag = $(id);
    $('html, body').animate({
        scrollTop: tag.offset().top - 100
    }, 'slow');
}

function copy(that){
    // console.log(that);
    var inp = document.createElement('input');
    document.body.appendChild(inp)
    inp.value = that.textContent
    inp.select();
    document.execCommand('copy',false);
    inp.remove();
  }

</script>
